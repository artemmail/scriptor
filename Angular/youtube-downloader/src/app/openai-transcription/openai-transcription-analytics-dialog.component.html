<h2 mat-dialog-title>Запустить аналитику</h2>
<div mat-dialog-content class="dialog-content">
  <p class="dialog-description">
    Выберите профиль пост-обработки и при необходимости укажите уточнение. Мы скопируем исходную
    задачу и запустим новую обработку сегментов без повторного распознавания аудио.
  </p>

  <mat-form-field appearance="outline" class="full-width">
    <mat-label>Профиль распознавания</mat-label>
    <mat-select
      [value]="selectedProfileId"
      (valueChange)="onProfileSelectionChanged($event)"
      [disabled]="profilesLoading || !profiles.length"
    >
      <mat-option *ngFor="let profile of profiles" [value]="profile.id">
        {{ profile.displayedName || profile.name }}
      </mat-option>
    </mat-select>
    <mat-hint *ngIf="clarificationHint">{{ clarificationHint }}</mat-hint>
  </mat-form-field>

  <mat-form-field appearance="outline" class="full-width">
    <mat-label>Уточнение для обработки</mat-label>
    <textarea
      matInput
      rows="3"
      [(ngModel)]="clarification"
      [placeholder]="clarificationPlaceholder"
    ></textarea>
  </mat-form-field>

  <mat-progress-bar *ngIf="profilesLoading" mode="indeterminate"></mat-progress-bar>
  <div class="error" *ngIf="profilesError">{{ profilesError }}</div>
</div>

<div mat-dialog-actions align="end">
  <button mat-button type="button" (click)="onCancel()" [disabled]="profilesLoading">Отмена</button>
  <button mat-flat-button color="primary" type="button" (click)="onConfirm()" [disabled]="!canSubmit()">
    Запустить
  </button>
</div>
