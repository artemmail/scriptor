<div class="create-topic-container">
  <mat-card>
    <mat-card-header>
      <mat-card-title>Новая тема</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form [formGroup]="topicForm" (ngSubmit)="onSubmit()">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Заголовок</mat-label>
          <input matInput formControlName="title" maxlength="256" />
          <mat-hint align="end">{{ titleLength }}/256</mat-hint>
          <mat-error *ngIf="topicForm.controls['title'].hasError('required')">
            Укажите заголовок
          </mat-error>
        </mat-form-field>

        <div class="editor-section" [class.invalid]="topicForm.controls['text'].invalid && topicForm.controls['text'].touched">
          <div class="editor-header">
            <label for="topic-text">Текст</label>
            <span class="char-counter">{{ textLength }}/10000</span>
          </div>
          <md-editor
            id="topic-text"
            formControlName="text"
            preview="vertical"
            height="'420px'"
            [options]="editorOptions"
            [preRender]="preRender"
          ></md-editor>
          <div class="editor-error" *ngIf="topicForm.controls['text'].hasError('required') && topicForm.controls['text'].touched">
            Укажите текст темы
          </div>
        </div>

        <div class="form-actions">
          <button mat-stroked-button type="button" (click)="onCancel()" [disabled]="submitting">
            Отмена
          </button>
          <span class="error" *ngIf="submitError">{{ submitError }}</span>
          <button mat-flat-button color="primary" type="submit" [disabled]="submitting">
            Опубликовать
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>
