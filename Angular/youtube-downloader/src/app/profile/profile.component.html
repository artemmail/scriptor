<div class="profile-page">
  <main class="page-content">
 

    <section class="profile-settings">
      <div class="section-header">
        <h2>Настройки профиля</h2>
        <p>
          Введите отображаемое имя — оно появится в списке задач и в совместной работе над документами. Максимальная
          длина имени — 100 символов.
        </p>
      </div>

      <div class="settings-grid">
        <div class="settings-card">
          <div class="state" *ngIf="loading">
            <mat-progress-spinner mode="indeterminate" diameter="48"></mat-progress-spinner>
            <span>Загружаем профиль…</span>
          </div>

          <div class="state state-error" *ngIf="loadError && !loading">
            <mat-icon>error_outline</mat-icon>
            <span>{{ loadError }}</span>
          </div>

          <form class="settings-form" *ngIf="!loading && !loadError" [formGroup]="form" (ngSubmit)="submit()">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Отображаемое имя</mat-label>
              <input matInput formControlName="displayName" maxlength="100" />
              <mat-error *ngIf="form.controls.displayName.hasError('required')">
                Введите отображаемое имя.
              </mat-error>
              <mat-hint align="end">Максимум 100 символов.</mat-hint>
            </mat-form-field>

            <div class="actions">
              <div class="status-messages">
                <span class="error" *ngIf="saveError">{{ saveError }}</span>
                <span class="success" *ngIf="saveSuccess && !saveError">Изменения сохранены.</span>
              </div>
              <button class="btn btn-primary" type="submit" [disabled]="saving">
                <mat-icon *ngIf="saving">hourglass_top</mat-icon>
                <span>{{ saving ? 'Сохранение…' : 'Сохранить изменения' }}</span>
              </button>
            </div>
          </form>
        </div>

        
      </div>
    </section>
  </main>
</div>
