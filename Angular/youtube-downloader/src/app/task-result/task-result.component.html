<div class="container">
  <!-- Десктопная версия (с mat-card) -->
  <div class="desktop-only">
    <mat-card class="blogblock youtube-result-card">
      <mat-card-header>
        <div class="header-flex">
          <button
            class="yt-logo-button"
            matRipple
            [matRippleColor]="'rgba(0,0,0,0.15)'"
            (click)="openVideoDialog(youtubeTask)"
            aria-label="Open video in dialog">
            <img src="assets/yt.webp" alt="YouTube" class="youtube-logo" />
          </button>
          <div class="title-wrapper">
            <mat-card-title class="video-title">
              {{ promoText }}
              <br>
              {{ youtubeTask?.title }}
            </mat-card-title>
            <mat-card-subtitle *ngIf="youtubeTask?.channelName">
              Channel: {{ youtubeTask?.channelName }}
              /
              {{ youtubeTask?.createdAt | localTime: 'yyyy-MM-dd HH:mm' }}
            </mat-card-subtitle>
          </div>
        </div>
      </mat-card-header>

      <mat-card-content>
        <div class="download-section">
          <span class="download-text">Download</span>
          <div class="download-icons">
            <!-- PDF -->
            <button
              mat-icon-button
              matTooltip="Download PDF"
              (click)="downloadAsPdf()"
              [disabled]="isDownloading">
              <mat-icon class="icon-pdf">picture_as_pdf</mat-icon>
            </button>

            <!-- Word -->
            <button
              mat-icon-button
              matTooltip="Download Word"
              (click)="downloadAsWord()"
              [disabled]="isDownloading">
              <mat-icon svgIcon="icon-msword">description</mat-icon>
            </button>

            <!-- Markdown -->
            <button
              mat-icon-button
              matTooltip="Download Markdown"
              (click)="downloadAsMd()"
              [disabled]="isDownloading">
              <mat-icon svgIcon="icon-markdown">description</mat-icon>
            </button>

            <!-- HTML -->
            <button
              mat-icon-button
              matTooltip="Download HTML"
              (click)="downloadAsHtml()"
              [disabled]="isDownloading">
              <mat-icon svgIcon="icon-html">code</mat-icon>
            </button>

            <!-- Copy to clipboard -->
            <button
              mat-icon-button
              matTooltip="Copy to clipboard"
              (click)="copyToClipboard()"
              [disabled]="isCopying">
              <mat-icon>content_copy</mat-icon>
            </button>

          
             
<button
  mat-icon-button
  matTooltip="Download Subtitles (SRT)"
  (click)="downloadAsSrt()"
  [disabled]="isDownloading || !youtubeTask?.id">
  <mat-icon>subtitles</mat-icon>
</button>

<button
  mat-icon-button
  [routerLink]="['/markdown-converter', youtubeTask?.id]"
  matTooltip="Edit in Markdown editor"
  [disabled]="!youtubeTask?.id">
  <mat-icon>edit</mat-icon>
</button>





          </div>
        </div>

        <hr />
        <app-yandex-ad></app-yandex-ad>
        <div [innerHTML]="processedMarkdown" class="markdown-content"></div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Мобильная версия (без mat-card) -->
  <div class="mobile-only">
    <app-yandex-ad></app-yandex-ad>

    <div class="blogblock">
      <div class="header-flex">
        <button
          class="yt-logo-button"
          matRipple
          [matRippleColor]="'rgba(0,0,0,0.15)'"
          (click)="openVideoDialog(youtubeTask)"
          aria-label="Open video in dialog">
          <img src="assets/yt.webp" alt="YouTube" class="youtube-logo" />
        </button>
        <div class="title-wrapper">
          <h2>{{ youtubeTask?.title }}</h2>
          <h3 *ngIf="youtubeTask?.channelName">
            Channel: {{ youtubeTask?.channelName }}
          </h3>
          <h4 *ngIf="youtubeTask?.createdAt">
            {{ youtubeTask?.createdAt | localTime: 'yyyy-MM-dd HH:mm' }}
          </h4>
        </div>
      </div>

      <div class="download-section">
        <span class="download-text">Download</span>
        <div class="download-icons">
          <!-- PDF -->
          <button
            mat-icon-button
            matTooltip="Download PDF"
            (click)="downloadAsPdf()"
            [disabled]="isDownloading">
            <mat-icon class="icon-pdf">picture_as_pdf</mat-icon>
          </button>

          <!-- Word -->
          <button
            mat-icon-button
            matTooltip="Download Word"
            (click)="downloadAsWord()"
            [disabled]="isDownloading">
            <mat-icon class="icon-word">description</mat-icon>
          </button>

          <!-- Markdown -->
          <button
            mat-icon-button
            matTooltip="Download Markdown"
            (click)="downloadAsMd()"
            [disabled]="isDownloading">
            <mat-icon class="icon-md">description</mat-icon>
          </button>

          <!-- HTML -->
          <button
            mat-icon-button
            matTooltip="Download HTML"
            (click)="downloadAsHtml()"
            [disabled]="isDownloading">
            <mat-icon class="icon-html">code</mat-icon>
          </button>

          <!-- Copy to clipboard -->
          <button
            mat-icon-button
            matTooltip="Copy to clipboard"
            (click)="copyHtmlToClipboard()"
            [disabled]="isCopying">
            <mat-icon>content_copy</mat-icon>
          </button>
        </div>
      </div>

      <hr />
      <div [innerHTML]="processedMarkdown" class="markdown-content"></div>
    </div>
  </div>
</div>


